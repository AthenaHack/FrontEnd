<!doctype html>
<html class="no-js" style="overflow-x: hidden" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmergAlert</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/css/foundation.min.css">

    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/c3.css">
    <link rel="stylesheet" href="/css/app.css">
    <link href="https://fonts.googleapis.com/css?family=Assistant:400,700" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <sript src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/js/foundation.min.js"></sript>

    <script src="/js/bundle.js"></script>

    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.21/c3.min.js"></script>

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js" data-main="/js/sentiment"></script>   -->

    <script src="/js/bing_maps.js"></script>
    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=AmA3g4fVkW_W0260B6WfwDR13pRvztfOlwIOEnuS01boL8g_SMA6IUhf_gx0EicT' async defer></script>
    <script src="/js/sentiment.js"></script>
    <script src="/server.js"></script>

  </head>
  <body>

    <div id="navbar" class="expanded row align-middle">
      <div class="small-6 columns">
        <h3 style="color: white">EmergAlert</h3>
      </div>
    </div>
    
    <div id="content" class="row">
      <div class="full-height medium-7 columns">
        <div id="security-feed" class="row column card">
          <div class="card-section">
            <img id="rec" src="img/rec.png">
            <div class="responsive-embed">
              <video id="myvid" autoplay controls>
                <source src="vid/cam.mp4" type="video/mp4" />
              </video>
            </div>
          </div>
        </div>
        <div id="controls" class="row column">
          <h3>Security Camera Footage</h3>
          <div class="contourLegend">
            <div style="background-color: rgba(215, 25, 28, 0.5)">High Activity </div>
            <div style="background-color: rgba(235, 140, 14, 0.5)"> Medium-High </div>
            <div style="background-color: rgba(235, 140, 14, 0.5)"> Medium-High </div>
            <div style="background-color: rgba(255, 255, 0, 0.5)"> Medium Activity </div>
            <div style="background-color: rgba(140, 202, 32, 0.5)"> Medium-Low </div>
            <div style="background-color: rgba(25, 150, 65, 0.5)"> Low Activity</div>
          </div>
          <div class="map-padding"></div>
          <div id="myMap" style="position:relative;width:600px;height:400px;float:left;"></div>
    
    
        </div>
      </div>
      <div class="medium-5 small-12 columns">
        <h3>Notifications</h3>
    
        <div id="chart4"></div>
        <script>
        var chart = c3.generate({
          bindto: '#chart4',
          data: {
            columns: [
              ['positive', 144, 225, 200, 80, 100, 87],
              ['negative', 70, 100, 80, 75, 190, 160]
            ],
            types: {
              positive: 'area-spline',
              negative: 'area-spline'
            },
            colors: {
              positive: 'lightblue',
              negative: 'lightpink'
            }
          }
        });
    
        setTimeout(function () {
          chart.load({
            columns: [
              ['positive', 225, 200, 80, 100, 87, 145],
              ['negative', 100, 80, 75, 190, 160, 68]
            ],
            types: {
              positive: 'area-spline',
              negative: 'area-spline'
            },
            colors: {
              positive: 'lightblue',
              negative: 'lightpink'
            }
          });
        }, 2000);
    
        setTimeout(function () {
          chart.load({
            columns: [
              ['positive', 200, 80, 100, 87, 145, 65],
              ['negative', 80, 75, 190, 160, 68, 89]
            ],
            types: {
              positive: 'area-spline',
              negative: 'area-spline'
            },
            colors: {
              positive: 'lightblue',
              negative: 'lightpink'
            }
          });
        }, 4000);
    
        setTimeout(function () {
          chart.load({
            columns: [
              ['positive', 80, 100, 87, 145, 65, 89],
              ['negative', 75, 190, 160, 68, 89, 111]
            ],
            types: {
              positive: 'area-spline',
              negative: 'area-spline'
            },
            colors: {
              positive: 'lightblue',
              negative: 'lightpink'
            }
          });
        }, 6000);
    
        var pos_num1 = 80; var pos_num2 = 100; var pos_num3 = 87; var pos_num4 = 145; var pos_num5 = 65; var pos_num6 = 89;
        var neg_num1 = 75; var neg_num2 = 190; var neg_num3 = 160; var neg_num4 = 68; var neg_num5 = 89; var neg_num6 = 111;
    
        for (i = 8000; i <= 40000; i += 2000) {
          console.log('going through loop');
    
          setTimeout(function () {
    
            // couldn't get
    
            // if (pos_num6 != new_pos_senti & neg_num6 != new_neg_senti) {
    
            pos_num1 = pos_num2;
            pos_num2 = pos_num3;
            pos_num3 = pos_num4;
            pos_num4 = pos_num5;
            pos_num5 = pos_num6;
            pos_num6 = pos_num1;
    
            neg_num1 = neg_num2;
            neg_num2 = neg_num3;
            neg_num3 = neg_num4;
            neg_num4 = neg_num5;
            neg_num5 = neg_num6;
            neg_num6 = neg_num1;
    
            chart.load({
              columns: [
                ['positive', pos_num1, pos_num2, pos_num3, pos_num4, pos_num5, pos_num6],
                ['negative', neg_num1, neg_num2, neg_num3, neg_num4, neg_num5, pos_num6]
                // ['positive', 100, 87, 45, 65, 89, new_pos_senti],
                // ['negative', 190, 160, 68, 89, 111, new_neg_senti]
              ],
              types: {
                positive: 'area-spline',
                negative: 'area-spline'
              },
              colors: {
                positive: 'lightblue',
                negative: 'lightpink'
              }
            });
          }, i);
    
        }
    
        </script>
    
        <div class="message-input collapse shrink">
          <span class="inline-label">
            <input type="text" placeholder="sentiment" id="text-input-box">
            <a href="#" class="button">Send</a>
          </span>
        </div>
    
        <div style="display: flex; vertical-align: text-bottom;">
          <h4>Most recent sentiment: </h4>
          <div id="display-sentiment" style="font-size: 24px; padding-left: 10px;">
          </div>
        </div>
        <h6>Closer to one is more positive, closer to 0 is more negative</h6>
    
        <div class="grid-frame">
    
          <div class="grid-block medium-4 large-4 vertical">
    
            <ul class="tabs" data-tabs id="example-tabs">
              <li class="tabs-title is-active"><a href="#panel1d" aria-selected="true">Received Messages</a></li>
            </ul>
    
            <div class="tabs-content" data-tabs-content="example-tabs">
              <div class="tabs-panel is-active" id="panel1d">
                <h4>Diane Tobit</h4>
                <p>help!!</p>
                <hr />
                <h4>Christine Sun</h4>
                <p>i don't know what's going on</p>
                <hr />
                <h4>Clara Chu</h4>
                <p>SOS SAVE US</p>
                <hr />
                <h4>Nadya Djojosantoso</h4>
                <p>at least i won't need to take midterms</p>
                <hr />
                <h4>Clara Chu</h4>
                <p>why meeee :(</p>
    
                <hr />
              </div>
            </div>
          </div>
    
    
        </div>
    
      </div>
    </div>
    

  </body>
</html>
